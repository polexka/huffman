(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=e,this._element=document.getElementById(e),this._textarea=this._element.querySelector(".textarea"),this._button=this._element.querySelector(".form__button"),this._callback=n,this._handleSubmit=this._handleSubmit.bind(this)}var n,r;return n=t,(r=[{key:"_handleSubmit",value:function(e){e.preventDefault(),this._textarea.disabled=!0,this._button.disabled=!0,this._callback(this._id)}},{key:"setEventListeners",value:function(){this._element.addEventListener("submit",this._handleSubmit)}},{key:"enableForm",value:function(){this._textarea.disabled=!1,this._button.disabled=!1}},{key:"setTextArea",value:function(e){this._textarea.value=e}},{key:"getTextArea",value:function(){return this._textarea.value}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=r((function e(t){var n=t.priority,r=t.value,o=t.node;i(this,e),this.data=n,this.value=r,this.node=o||this,null===o&&(this.left=null,this.right=null)}));const u=function(){function e(){i(this,e),this.root=null}return r(e,[{key:"insert",value:function(e){var t=new o(e);null===this.root?this.root=t:this.insertNode(this.root,t)}},{key:"insertNode",value:function(e,t){t.data<e.data?null===e.left?e.left=t:this.insertNode(e.left,t):null===e.right?e.right=t:this.insertNode(e.right,t)}},{key:"insertLeft",value:function(e){var t=new o(e);this.root.left=t}},{key:"insertRight",value:function(e){var t=new o(e);this.root.right=t}},{key:"inOrderTraverse",value:function(e,t){null!=e&&(this.inOrderTraverse(e.left,t),t(e),this.inOrderTraverse(e.right,t))}},{key:"preOrderTraverse",value:function(e,t){null!=e&&(t(e),this.preOrderTraverse(e.left,t),this.preOrderTraverse(e.right,t))}},{key:"postOrderTraverse",value:function(e,t){null!=e&&(this.postOrderTraverse(e.left,t),this.postOrderTraverse(e.right,t),t(e))}},{key:"search",value:function(e,t){return null===e?null:t<e.data?this.search(e.left,t):t>e.data?this.search(e.right,t):e}}]),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=c(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},l.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function f(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}const v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=h(t);if(n){var i=h(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return f(this,e)});function i(){return y(this,i),r.apply(this,arguments)}return p(i,[{key:"enqueue",value:function(e){if(void 0===e.priority)throw newError("У объекта отсутствует поле priority");l(h(i.prototype),"enqueue",this).call(this,e)}},{key:"dequeue",value:function(){var e=this._data[0].priority,t=0;return this._data.forEach((function(n,r){n.priority<e&&(e=n.priority,t=r)})),this._data.splice(t,1)[0]}}]),i}(function(){function e(){y(this,e),this._data=[]}return p(e,[{key:"enqueue",value:function(e){this._data.push(e)}},{key:"dequeue",value:function(){return this._data.shift()}},{key:"isEmpty",value:function(){return 0===this._data.length}},{key:"size",value:function(){return this._data.length}},{key:"clear",value:function(){this._data.length=0}}]),e}());function b(e,t){var n={};if(null!=e.node.left&&null!=e.node.right){var r=b(e.node.left,t+"0"),i=b(e.node.right,t+"1");n=Object.assign(n,r,i)}return e.code=t,e.value.length<2&&(n["".concat(e.value)]=t),n}function _(e){var t=new v;for(var n in e)t.enqueue({value:n,priority:e[n]});for(;t.size()>1;){var r=t.dequeue(),i=t.dequeue(),o={value:r.value+i.value,priority:r.priority+i.priority},a=new u;a.insert(o),null!=r.node?a.insertLeft({value:r.value,priority:r.priority,node:r.node}):a.insertLeft(r),null!=i.node?a.insertRight({value:i.value,priority:i.priority,node:i.node}):a.insertRight(i),o.node=a.root,t.enqueue(o)}return b(t.dequeue(),"")}function g(e){if("encode"==e){m.enableForm();var t=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=0;for(var r=0;r<e.length;r++)t[e[r]]=t[e[r]]+1;return t}(O.getTextArea());m.setTextArea("".concat(function(e){var t="";for(var n in e)t+="'".concat(n,"': ").concat(e[n],"  ");return t}(_(t)),"\n    _________\n").concat(function(e,t){var n=_(t),r="";for(var i in e)r+="".concat(n[e[i]]," ");return r}(O.getTextArea(),t)))}else O.enableForm()}var O=new t("encode",g),m=new t("decode",g);O.setEventListeners(),m.setEventListeners()})();